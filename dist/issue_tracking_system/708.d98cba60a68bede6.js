"use strict";(self.webpackChunkissue_tracking_system=self.webpackChunkissue_tracking_system||[]).push([[708],{7708:(tt,T,i)=>{i.r(T),i.d(T,{UploadModule:()=>m});var p=i(6895),u=i(9170),c=i(5359),I=i(2986),N=i(6505);const{selectAll:D}=N._.getSelectors(),_=(0,c.ZF)("files"),b=(0,c.P1)(_,D);var f=i(5776),t=i(4650),x=i(9818),U=i(7392),O=i(2802),A=i(5641),L=i(3593);const Y=function(o){return["/","upload",o,"update"]};function Q(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"app-page-header"),t._UZ(2,"app-page-header-back",1),t.TgZ(3,"app-page-header-title"),t._uU(4),t.qZA(),t.TgZ(5,"button",2)(6,"mat-icon"),t._uU(7,"edit"),t.qZA()(),t.TgZ(8,"button",3),t.NdJ("click",function(){const l=t.CHM(n).ngIf,C=t.oxw();return t.KtG(C.delete(l.id))}),t.TgZ(9,"mat-icon"),t._uU(10,"delete"),t.qZA()()(),t._UZ(11,"pre",4),t.qZA()}if(2&o){const n=e.ngIf;t.xp6(2),t.Q6J("link","/upload/list"),t.xp6(2),t.Oqu(n.title),t.xp6(1),t.Q6J("routerLink",t.VKq(4,Y,n.id)),t.xp6(6),t.Q6J("innerHTML",n.content,t.oJD)}}class g{constructor(e,n){this.activatedRoute=e,this.store=n}ngOnInit(){var o;this.fileId=this.activatedRoute.snapshot.params.id,this.file$=this.store.pipe((0,c.Ys)((o=this.fileId,(0,c.P1)(_,e=>e.entities[o])))),this.file$.pipe((0,I.q)(1)).subscribe(e=>!e&&this.store.dispatch((0,f.uJ)({id:this.fileId})))}delete(e){this.store.dispatch((0,f.Lr)({id:e}))}}g.\u0275fac=function(e){return new(e||g)(t.Y36(u.gz),t.Y36(c.yh))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-file-details"]],decls:2,vars:3,consts:[[4,"ngIf"],["ariaLabel","Back to Posts List",3,"link"],["mat-icon-button","","color","primary","aria-label","Edit File",1,"ml-auto",3,"routerLink"],["mat-icon-button","","color","warn","aria-label","Delete File",3,"click"],["test-id","page-content",1,"page-content",3,"innerHTML"]],template:function(e,n){1&e&&(t.YNc(0,Q,12,6,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.file$))},dependencies:[p.O5,u.rH,x.eB,U.Hw,O.q,A.x,L.S,p.Ov],changeDetection:0});var M=i(2903),k=i(3238);function J(o){return function P(o){return"number"==typeof o}(o)&&isFinite(o)}function w(o,e){return Math.round(o*Math.pow(10,e))/Math.pow(10,e)}class s{transform(e,n=0,a="bytes",r){if(!(J(e)&&J(n)&&function z(o){return o%1==0}(n)&&function q(o){return o>=0}(n)))return e;let l=e,C=a;for(;"bytes"!==C;)l*=1024,C=s.formats[C].prev;if(r){const Z=w(s.calculateResult(s.formats[r],l),n);return s.formatResult(Z,r)}for(const F in s.formats)if(s.formats.hasOwnProperty(F)){const Z=s.formats[F];if(l<Z.max){const W=w(s.calculateResult(Z,l),n);return s.formatResult(W,F)}}}static formatResult(e,n){return`${e} ${n}`}static calculateResult(e,n){const a=e.prev?s.formats[e.prev]:void 0;return a?n/a.max:n}}s.formats={bytes:{max:1024},kilobytes:{max:Math.pow(1024,2),prev:"bytes"},megabytes:{max:Math.pow(1024,3),prev:"kilobytes"},gigabytes:{max:Math.pow(1024,4),prev:"gigabytes"},terabytes:{max:Number.MAX_SAFE_INTEGER,prev:"terabytes"}},s.\u0275fac=function(e){return new(e||s)},s.\u0275pipe=t.Yjl({name:"bytes",type:s,pure:!0});const H=function(o){return["/","upload",o]};function S(o,e){if(1&o&&(t.TgZ(0,"mat-list-item",9)(1,"mat-icon",10),t._uU(2,"event_note"),t.qZA(),t.TgZ(3,"div",11),t._uU(4),t.qZA(),t.TgZ(5,"p",12),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",13),t._uU(9),t.ALo(10,"bytes"),t.qZA()()),2&o){const n=e.$implicit;t.Q6J("routerLink",t.VKq(8,H,n.id)),t.xp6(4),t.Oqu(n.name),t.xp6(2),t.Oqu(t.lcZ(7,4,n.id)),t.xp6(3),t.Oqu(t.lcZ(10,6,n.size))}}const $=function(){return["/dashboard"]},E=function(){return["/","upload","create"]};function G(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"app-page-header"),t._UZ(2,"app-page-header-back",1),t.TgZ(3,"app-page-header-title",2),t._uU(4,"File List"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.onRefresh())}),t.TgZ(6,"mat-icon"),t._uU(7,"refresh"),t.qZA()()(),t.TgZ(8,"div",4)(9,"button",5)(10,"mat-icon"),t._uU(11,"add"),t.qZA()()(),t.TgZ(12,"div",6)(13,"mat-list",7),t.YNc(14,S,11,10,"mat-list-item",8),t.qZA()()()}if(2&o){const n=e.ngIf;t.xp6(2),t.Q6J("link",t.DdM(4,$)),t.xp6(1),t.Q6J("addons",n.length),t.xp6(6),t.Q6J("routerLink",t.DdM(5,E)),t.xp6(5),t.Q6J("ngForOf",n)}}class h{constructor(e,n){this.store=e,this.cdr=n,e.dispatch((0,f.yl)()),this.files$=this.store.pipe((0,c.Ys)(b))}onRefresh(){this.store.dispatch((0,f.yl)()),this.files$=this.store.pipe((0,c.Ys)(b)),this.cdr.detectChanges()}}h.\u0275fac=function(e){return new(e||h)(t.Y36(c.yh),t.Y36(t.sBO))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-file-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["ariaLabel","Back to homepage",3,"link"],[3,"addons"],["mat-icon-button","","color","primary","aria-label","Reload",1,"ml-auto",3,"click"],[1,"floating-action"],["mat-fab","","color","primary","aria-label","Add new item",3,"routerLink"],[1,"page-content"],[1,"pt-0"],["test-id","list-item","mat-ripple","",3,"routerLink",4,"ngFor","ngForOf"],["test-id","list-item","mat-ripple","",3,"routerLink"],["mat-list-icon","","color","accent"],["mat-line",""],[1,"property-date"],["mat-line","",1,"property-size"]],template:function(e,n){1&e&&(t.YNc(0,G,15,6,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.files$))},dependencies:[p.sg,p.O5,u.rH,x.eB,U.Hw,M.Zj,M.oh,k.X2,M.ap,k.wG,O.q,A.x,L.S,p.Ov,p.uU,s],styles:[".page-content[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .property-size[_ngcontent-%COMP%]{color:gray}.page-content[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .property-date[_ngcontent-%COMP%]{font-size:smaller}"],changeDetection:0});class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-files"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[u.lC],changeDetection:0});const X=["preview"];function K(o,e){if(1&o&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Oqu(n.fileName)}}class y{constructor(e,n){this.cdr=e,this.store=n,this.previewValue="No files currently selected for upload",this.fileName=""}updateImageDisplay(e){e.text().then(n=>{this.previewValue=n,this.cdr.detectChanges()}),this.fileName=e.name,this.selectedFile=e}saveFile(){!this.selectedFile||this.selectedFile.text().then(e=>{const n={id:Date.now().toString(),name:this.selectedFile.name,size:this.selectedFile.size,lastModified:this.selectedFile.lastModified,type:this.selectedFile.type,content:e};this.store.dispatch((0,f.Px)({file:n}))})}}y.\u0275fac=function(e){return new(e||y)(t.Y36(t.sBO),t.Y36(c.yh))},y.\u0275cmp=t.Xpm({type:y,selectors:[["app-upload"]],viewQuery:function(e,n){if(1&e&&t.Gf(X,5),2&e){let a;t.iGM(a=t.CRH())&&(n.preview=a.first)}},decls:14,vars:2,consts:[[1,"form"],["type","button","mat-raised-button","",3,"click"],["type","file","id","file","name","file","accept",".txt, plain/text","hidden","","type","file","id","file",3,"change"],["fileInput",""],[1,"preview"],["preview",""],[4,"ngIf"],[1,"submit"],["mat-button","",3,"click"]],template:function(e,n){if(1&e){const a=t.EpF();t.TgZ(0,"div",0)(1,"div")(2,"button",1),t.NdJ("click",function(){t.CHM(a);const l=t.MAs(5);return t.KtG(l.click())}),t._uU(3,"Choose File"),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("change",function(l){return n.updateImageDisplay(l.target.files[0])}),t.qZA()(),t.TgZ(6,"div",4,5),t.YNc(8,K,2,1,"h2",6),t.TgZ(9,"pre"),t._uU(10),t.qZA()(),t.TgZ(11,"div",7)(12,"button",8),t.NdJ("click",function(){return n.saveFile()}),t._uU(13,"Submit"),t.qZA()()()}2&e&&(t.xp6(8),t.Q6J("ngIf",n.fileName),t.xp6(2),t.Oqu(n.previewValue))},dependencies:[p.O5,x.eB],styles:[".form[_ngcontent-%COMP%]{padding:16px}.form[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{padding-top:16px}.form[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{overflow:auto;background:lightgray;padding:16px}.form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{float:right}"],changeDetection:0});const V=[{path:"",component:v,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:h},{path:"create",component:y},{path:":id",component:g}]}];class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({imports:[u.Bz.forChild(V),u.Bz]});var j=i(4006),B=i(8806);class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[p.ez,d,j.UX,B.m]})}}]);